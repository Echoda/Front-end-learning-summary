<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<script>
		var arr = [1,2,3];
		console.log(...arr);

		function foo(...args) {
			var sum = 0;
			args.forEach(function(e) {
				sum += e;
			})
			console.log(sum);
		}
		foo(...arr);

	// 复制数组
		var arr2 = [...arr];
		console.log('arr2:',arr2,arr == arr2);
	//复制对象
		var obj = {
			name:'sun',
			age:18
		};
		var obj2 = {...obj};
		console.log(obj2,obj == obj2);
	//深拷贝(存在一点问题，要在外部把result再赋值给obj2)
		var obj = {
			name: 'a',
			age: 12,
			class: {
				type: 'math',
				content: ['one','two',{
					aa: [{}]
				}],
				fn: function () {console.log('hh')}
			},
			n: null
		};
		var obj2 = {};
		function deepCopy(target,result) {
			if(result instanceof Object) {
				result = {...target};
			}else if(result instanceof Array){
				result = [...target];
			}
			for(var k in target){
				if(target[k] instanceof Array){
					result[k] = [...target[k]];
					deepCopy(target[k],result[k]);
				}else if(target[k] instanceof Object){
					result[k] = {...target[k]};
					deepCopy(target[k],result[k]);
				}
			};
			return result;
		}
		obj2 = deepCopy(obj,obj2);
		console.log('obj2:',obj2);
 

	 // 普通方法
		var obj2 = {};
		function deepCopy (data,result) {
			var result = result || {};        //不传第二个参数默认为{}
			for(var k in data){
				if(data.hasOwnProperty(k)){   //避免去到原型链上的属性
					if(typeof data[k] != 'object' || data[k] == null){  //不是对象或为null
						result[k] = data[k];
					}else {
						if(Object.prototype.toString.call(data[k]) == '[object Object]'){ //对象
							result[k] = {};
						}else {                    //数组
							result[k] = [];  
						}
						deepCopy(data[k],result[k]);
					}
				}
			}
			return result;
		}

		deepCopy(obj,obj2);
		console.log('obj2:',obj2);

		console.log(deepCopy(obj,obj2));
	</script>
</body>
</html>